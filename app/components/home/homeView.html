<body>
<div class="container">
    <div ng-include="'app/components/partials/navigation.html'"></div>
    <div class="nav-bottom"></div>
    <div class="row">
        <div class="col-xs-12" id="translations">
            <div ng-repeat="verse in verses">
                <div class="well translations col-xs-12" id="v_{{verse.id}}">
                    <div ng-repeat="translation in verse.translations">
                        <div ng-if="$first"><h4>{{translation.chapter}}:{{translation.verse}}</h4></div>
                        <div class="row" id="t_{{translation.id}}">
                            <div class="col-xs-12 col-sm-3 authorDiv_{{authorMap[translation.authorId].color}}">
                                {{authorMap[translation.authorId].name}}
                            </div>
                            <div class="col-xs-12 col-sm-9 translation_content" ng-class="{translation_rtl: authorMap[translation.authorId].language=='ar'}"><span
                                    ng-bind-html="translation.content | with_footnote_link:translation.id:translation.authorId | to_trusted"></span>
                            </div>
                        </div>
                        <show-verse data="showVerseData.data" ng-if="showVerseAtTranslation==translation.id"
                                    class="showVerseData"></show-verse>
                        <div class="row" ng-if="!$last">
                            <hr/>
                        </div>
                    </div>
                    <div ng-repeat="(verseTagsKey, verseTagsVal) in verseTagsJSON"
                         ng-if="verseTagsVal.verseId==verse.id" style="text-align: right;width:100%">
                        <hr/>
                        <button ng-repeat="verseTag in verseTagsVal.tags" class="btn btn-xs btn-info verse_tag"
                                ng-click="goToVerseTag(verse.id,verseTag.tag)" onclick="verseTagClicked(this)">
                            {{verseTag.tag}}
                        </button>
                    </div>
                    <div ng-if="targetVerseForTagContent==verse.id" class="verse_tag_content">
                        <h4>Etiketli Ayetler</h4>
                        <select class="verseTagContentAuthor"
                                ng-options="author.id as author.name for author in authors | filter:authorFilter"
                                ng-model="verseTagContentAuthor"
                                ng-change="verseTagContentAuthorUpdate(verseTagContentAuthor)">
                        </select>


                        <div ng-repeat="verseTagContent in verseTagContents">
                            <div ng-repeat="verseTagContentTranslation in verseTagContent.translations"
                                 ng-if="verseTagContentTranslation.authorId==verseTagContentAuthor">
                                <strong>{{verseTagContentTranslation.verseId / 1000 |
                                    number:0}}:{{verseTagContentTranslation.verseId % 1000}}</strong>
                                {{verseTagContentTranslation.content}}
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /row-->

</div>
<!-- /container-->


<div ng-include="'app/components/partials/authors_modal.html'"></div>
<div ng-include="'app/components/partials/editor_modal.html'"></div>

<div class="modal" id="homearama">
        <div style="width:750px" class="modal-dialog fixed-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" data-dismiss="modal" aria-hidden="true" style="float:right;"><i
                            class="fa fa-close"></i></button>
                    <h4 class="modal-title">Filtre seçenekleri</h4>
                </div>

                <div class="modal-body">
                    
                    <table style="width: 700px">
    <tr>
        <td style="width: 260px">
        
        <strong>
            Yazarlar</strong>
        <br />
        <br />
         <div>
                        <ul class="selectable_list">
                            <li ng-repeat="author in authors"
                                ng-click="annotationSearchAuthorToggleSelection(author.id)"
                                ng-class="{ 'selected_list_item': annotationSearchAuthorSelection.indexOf(author.id) > -1}">
                                {{author.name}}
                            </li>
                        </ul>

                    </div>
        </td>
        <td style="width: 440px; height: 21px; border-left: dimgray 1px solid; padding-left: 10px; vertical-align: top;">
         
    <div class="well" ng-init="init()">
    <table>
      <td>
      <i class="fa fa-toggle-on active" ng-if="status == true" ng-click="changeStatus();"></i>
      <i class="fa fa-toggle-on fa-rotate-180 inactive" ng-if="status == false" ng-click="changeStatus();"></i>
      </td>
      <td align="left" style="width:100%; padding-left: 15px;">      Benim notlarımı göster</td>
      </table>
     </div>
    
    <div class="well">
     Çevremdeki kişilere ait olan notlar
        <tags-input ng-model="$parent.cevres" placeholder="Çevre Seçiniz" display-property="name" replace-spaces-with-dashes="false" min-length="2">
        <auto-complete source="cevrelistele()" min-length="2"></auto-complete>
        </tags-input>
    </div>
    
    <div class="well">
      Kişilere ait olan notlar
        <tags-input ng-model="$parent.kisis" placeholder="Kişi Seçiniz" display-property="name" replace-spaces-with-dashes="false" min-length="2">
        <auto-complete source="kisilistele($query)" min-length="2"></auto-complete>
        </tags-input>
        </div>
        </td>
    </tr>
</table>
                   
                </div>

                <div class="modal-footer">
                    <a href="#" class="btn btn-primary btn-wide" data-dismiss="modal"
                       ng-click="search_all_annotations()">Tamam</a>
                </div>
            </div>
        </div>
    </div>

<div class="cd-panel from-right" id="cd-panel-right">
    <!--     <a href="#0" class="cd-panel-close">Close</a>-->
    <div class="cd-panel-container">


        <div class="cd-panel-content">
            <div style="height:50px"></div>
            <div style="padding-bottom:10px;">
                <button onclick="closePanel()" class="btn btn-default btn-xs" style="float: left; height: 30px;"><i
                        class="fa fa-undo"></i></button>
                <button class="btn btn-warning btn-xs" ng-click="resetAnnotationFilter()"
                        ng-show='filteredAnnotations.length > 0 || searchText!=""' style="float: right; height: 30px;">
                    <i
                            class="fa fa-trash-o"></i>
                    Filtreyi kaldır
                </button>


                <div style="display: block;">
                    <!--    <input ng-model="searchText" />-->
                    <input style="width: 150px; height: 30px;" type="text" placeholder="ara" ng-model="searchText">
                    <select ng-model="filterOrderSelect" ng-init="filterOrderSelect='verseId'"
                            ng-change="annotationFilterOrder(filterOrderSelect)" style="height: 30px;">
                        <option value="verseId">Ayet</option>
                        <option value="-updated">Zaman</option>
                    </select>
                </div>


            </div>
            <div ng-repeat="annotation in annotations | filter:annotationFilter | filter: annotationTextSearch"
                 class="sidebar_annotation box"
                 ng-click="scrollToElement('t_'+annotation.translationId)">
                <!-- s_a -->
                <div class="s_a_header">
                    {{annotation.verseId / 1000 | number:0}}:{{annotation.verseId % 1000}}
                </div>
                <div>
                    <blockquote>{{annotation.quote}}</blockquote>
                </div>
                <div class="s_a_text">
                    <span ng-bind-html="annotation.text | newLineAllowed | to_trusted"></span>
                </div>
                <div ng-repeat="annotationTag in annotation.tags" class="tag label label-info s_a_tag">
                    {{annotationTag}}
                </div>
                <div class="row" style="padding:0 15px">
                    <div style="float: left">{{annotation.updated | date: 'dd/MM/yyyy HH:mm:ss'}}</div>
                    <div style="float: right">
                        <button type="button" class="btn btn-primary btn-xs" ng-click="editAnnotation($index)"><i
                                class="fa fa-pencil-square-o"></i>
                        </button>
                        <button type="button" class="btn btn-primary btn-xs" ng-click="deleteAnnotation($index)"><i
                                class="fa fa-trash-o"></i></button>
                    </div>
                </div>

            </div>
        </div>
        <!-- cd-panel-content -->
    </div>
    <!-- cd-panel-container -->
</div>
<!-- cd-panel -->


 
<div ng-include="'app/components/partials/off_canvas_menu.html'"></div>


</body>