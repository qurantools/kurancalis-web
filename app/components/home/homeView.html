<body>
<div class="container">
    <!--
        <pre>isReady: <span id="is_ready" ng-bind="facebookIsReady"></span></pre>
        <pre>status: <span id="login_status" ng-bind="loginStatus"></span></pre>
        <pre>token: <span id="tokenFb" ng-bind="tokenFb"></span></pre>
        <pre>access token: <span id="accessToken" ng-bind="access_token"></span></pre>
        <pre>validation_response: <span id="api_first_name" ng-bind="validation_response | json"></span></pre>
        <pre>user: <span id="user_info" ng-bind="user | json"></span></pre>
    -->
    <!--
        <pre>annotations: <span id="annotatis" ng-bind="annotations | json"></span></pre>
        <button ng-click="toggleSidebar()">toggle</button>
    -->
    <nav class="navbar navbar-default" role="navigation">
        <div>
            <form>
                <div class="row" style="padding-left: 15px;">
                    <div style="float: left">
                        <input type="text" ng-model="chapter_id" size="12"/>
                    </div>
                    <input type="hidden" ng-model="author_mask" value="48"/>

                    <div style="float: left; padding-left:15px; ">
                        <button type="button" id="list_translations" ng-click="goToChapter()" class="btn btn-primary">
                            Sureye git
                        </button>
                        <button class="btn btn-primary" data-target="#myModal" data-toggle="modal" type="button">
                            <i class="fa fa-user"></i>
                        </button>
                    </div>
                    <div ng-show="facebookIsReady" class="facebook_area">
                        <div ng-if="user==null">
                            <button type="button" id="login" ng-click="login()" class="btn btn-primary">
                                Giriş
                            </button>
                        </div>
                        <div ng-if="user!=null">
                            <img ng-src="{{user.photo}}" height="30"/>
                            {{user.name}}
                            <button type="button" id="remove_auth" ng-click="log_out()" class="btn btn-primary">
                                Çıkış
                            </button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <!-- /.navbar-collapse -->
    </nav>
    <!-- /navbar -->


    <div class="row">
        <div class="col-xs-12" id="translations">
            <div ng-repeat="verse in verses">
                <div class="well translations col-xs-12" id="v_{{verse.id}}">
                    <div ng-repeat="translation in verse.translations">
                        <div ng-if="$first"><h4>{{translation.chapter}}:{{translation.verse}}</h4></div>
                        <div class="row" id="t_{{translation.id}}">
                            <div class="col-xs-12 col-sm-3 authorDiv_{{authorMap[translation.authorId].color}}">
                                {{authorMap[translation.authorId].name}}
                            </div>
                            <div class="col-xs-12 col-sm-9 translation_content"><span
                                    ng-bind-html="translation.content | with_footnote_link:translation.id | to_trusted"></span>
                            </div>
                        </div>
                        <div class="row" ng-if="!$last">
                            <hr/>
                        </div>
                    </div>
                </div>
            </div>


        </div>
        <!-- /sol-->
        <div id="sidebar" class="hide">
            <div ng-repeat="annotation in annotations" class="sidebar_annotation"><!-- s_a -->
                <div class="s_a_header">
                    {{annotation.verseId / 1000 | number:0}}:{{annotation.verseId % 1000}}
                </div>
                <div>
                    {{annotation.quote}}
                </div>
                <div class="well">
                    {{annotation.text}}
                </div>
            </div>
        </div>
        <!-- /sağ-->

    </div>
    <!-- /row-->

</div>
<!-- /container-->


<div class="modal" id="myModal">
    <div class="modal-dialog fixed-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" data-dismiss="modal" aria-hidden="true" style="float:right;"><i
                        class="fa fa-close"></i></button>
                <h4 class="modal-title">Yazarlar</h4>
            </div>

            <div class="modal-body">
                <ul>
                    <li ng-repeat="author in authors">
                        <label>
                            <input
                                    type="checkbox"
                                    name="selectedauthors[]"
                                    value="{{author.id}}"
                                    ng-checked="selection.indexOf(author.id) > -1"
                                    ng-click="toggleSelection(author.id)"
                                    > {{author.name}}
                        </label>
                    </li>
                </ul>
            </div>

            <div class="modal-footer">
                <a href="#" class="btn btn-primary btn-wide" data-dismiss="modal" ng-click="goToChapter()">Tamam</a>
            </div>
        </div>
    </div>
</div>


<div class="modal" id="annotationModal">
    <div class="modal-dialog fixed-dialog">
        <div class="modal-content">
            <div class="modal-header" id="annotationData_header">
                <strong>{{annotationModalDataVerse}}</strong>
                {{annotationModalData.quote}}
                <h4 class="modal-title">{{annotationModal.title}}</h4>
            </div>

            <div class="modal-body">
                <textarea class="form-control" id="annotationData_text" ng-model="annotationModalData.text"></textarea>


                <div class="row">
                    <div class="col-xs-6">
                        <h3>etiketler</h3>


                        <tags-input ng-model="tags" display-property="name" replace-spaces-with-dashes=false
                                    min-length="2">

                            <auto-complete source="loadTags($query)" min-length="2"></auto-complete>

                        </tags-input>


                        <button class="btn btn-primary" type="button" data-toggle="modal" data-target="#myModal">
                            <i class="fa fa-plus"></i>
                        </button>


                        <ul ng-repeat="selectedTag in selectedTags">
                            <li>{{selectedTag}}</li>
                        </ul>

                    </div>
                    <div class="col-xs-6">
                        <input type="radio" ng-model="annotationModalData.colour" value="yellow"> Sarı <br/>
                        <input type="radio" ng-model="annotationModalData.colour" value="red"> Kırmızı <br/>
                        <input type="radio" ng-model="annotationModalData.colour" value="green"> Yeşil <br/>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" data-dismiss="modal" aria-hidden="true" class="btn" ng-click="hideEditor()">
                    Vazgeç
                </button>
                <!--
                 $('.annotator-hl-temporary').removeClass('annotator-hl');$('span').removeClass('annotator-hl-temporary');
                 -->
                <a href="#" class="btn btn-primary btn-wide" data-dismiss="modal" ng-click="submitEditor()">Tamam</a>
            </div>
        </div>
    </div>
</div>


</body>